<svg width="800" height="900" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="400" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">
    BlockBench Evaluation Pipeline
  </text>

  <!-- Dataset Layer -->
  <rect x="50" y="60" width="700" height="120" fill="#E3F2FD" stroke="#1976D2" stroke-width="2" rx="5"/>
  <text x="400" y="85" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#1565C0">
    Dataset (58 Samples)
  </text>

  <!-- Dataset boxes -->
  <rect x="80" y="100" width="180" height="60" fill="#BBDEFB" stroke="#1976D2" stroke-width="1.5" rx="3"/>
  <text x="170" y="125" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle">TC Dataset</text>
  <text x="170" y="145" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">5 base × 4 transforms</text>

  <rect x="310" y="100" width="180" height="60" fill="#BBDEFB" stroke="#1976D2" stroke-width="1.5" rx="3"/>
  <text x="400" y="125" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle">GS Dataset</text>
  <text x="400" y="145" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">10 samples (Gold Standard)</text>

  <rect x="540" y="100" width="180" height="60" fill="#BBDEFB" stroke="#1976D2" stroke-width="1.5" rx="3"/>
  <text x="630" y="125" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle">DS Dataset</text>
  <text x="630" y="145" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">7 base × 4 transforms</text>

  <!-- Arrow 1 -->
  <path d="M 400 180 L 400 220" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Transformations Layer -->
  <rect x="50" y="220" width="700" height="100" fill="#FFF3E0" stroke="#F57C00" stroke-width="2" rx="5"/>
  <text x="400" y="245" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#E65100">
    Code Transformations
  </text>
  <text x="400" y="270" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">
    Original | Sanitized | Medical | Shapeshifter | Hydra | No-Comments
  </text>
  <text x="400" y="295" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    Semantic-preserving transformations to test robustness
  </text>

  <!-- Arrow 2 -->
  <path d="M 400 320 L 400 360" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Model Inference Layer -->
  <rect x="50" y="360" width="700" height="140" fill="#F3E5F5" stroke="#7B1FA2" stroke-width="2" rx="5"/>
  <text x="400" y="385" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#6A1B9A">
    LLM Inference (6 Models)
  </text>

  <!-- Model boxes -->
  <rect x="70" y="405" width="110" height="40" fill="#E1BEE7" stroke="#7B1FA2" stroke-width="1.5" rx="3"/>
  <text x="125" y="430" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Claude Opus 4.5</text>

  <rect x="190" y="405" width="110" height="40" fill="#E1BEE7" stroke="#7B1FA2" stroke-width="1.5" rx="3"/>
  <text x="245" y="430" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">Gemini 3 Pro</text>

  <rect x="310" y="405" width="110" height="40" fill="#E1BEE7" stroke="#7B1FA2" stroke-width="1.5" rx="3"/>
  <text x="365" y="430" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">GPT-5.2</text>

  <rect x="430" y="405" width="110" height="40" fill="#E1BEE7" stroke="#7B1FA2" stroke-width="1.5" rx="3"/>
  <text x="485" y="430" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">DeepSeek V3.2</text>

  <rect x="550" y="405" width="80" height="40" fill="#E1BEE7" stroke="#7B1FA2" stroke-width="1.5" rx="3"/>
  <text x="590" y="420" font-family="Arial, sans-serif" font-size="9" text-anchor="middle">Llama 3.1</text>
  <text x="590" y="435" font-family="Arial, sans-serif" font-size="9" text-anchor="middle">405B</text>

  <rect x="640" y="405" width="80" height="40" fill="#E1BEE7" stroke="#7B1FA2" stroke-width="1.5" rx="3"/>
  <text x="680" y="420" font-family="Arial, sans-serif" font-size="9" text-anchor="middle">Grok 4</text>
  <text x="680" y="435" font-family="Arial, sans-serif" font-size="9" text-anchor="middle">Fast</text>

  <!-- Prompt types -->
  <text x="400" y="470" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    Prompts: Direct | Naturalistic | Adversarial
  </text>

  <!-- Arrow 3 -->
  <path d="M 400 500 L 400 540" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Response Parsing Layer -->
  <rect x="50" y="540" width="700" height="70" fill="#E8F5E9" stroke="#388E3C" stroke-width="2" rx="5"/>
  <text x="400" y="565" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#2E7D32">
    Response Parsing &amp; Validation
  </text>
  <text x="400" y="590" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">
    Extract structured predictions | Normalize vulnerability types | Validate format
  </text>

  <!-- Arrow 4 -->
  <path d="M 400 610 L 400 650" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Judge Evaluation Layer -->
  <rect x="50" y="650" width="700" height="90" fill="#FCE4EC" stroke="#C2185B" stroke-width="2" rx="5"/>
  <text x="400" y="675" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#AD1457">
    Judge Evaluation (Mistral Medium 3)
  </text>
  <text x="400" y="700" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">
    Classify findings: TARGET_MATCH | LUCKY_GUESS | VALID_CONCERN | FALSE_POSITIVE
  </text>
  <text x="400" y="720" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    Evaluate reasoning quality: Root Cause | Attack Vector | Fix Suggestion
  </text>

  <!-- Arrow 5 -->
  <path d="M 400 740 L 400 780" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Metrics Layer -->
  <rect x="50" y="780" width="700" height="90" fill="#FFF9C4" stroke="#F9A825" stroke-width="2" rx="5"/>
  <text x="400" y="805" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#F57F17">
    Metrics &amp; Analysis
  </text>
  <text x="400" y="830" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">
    TDR | Finding Precision | Lucky Guess Rate | Accuracy | RCIR | AVA | FSV
  </text>
  <text x="400" y="850" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#E65100">
    Security Understanding Index (SUI)
  </text>

  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333"/>
    </marker>
  </defs>
</svg>
